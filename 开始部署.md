# ğŸš€ å¼€å§‹éƒ¨ç½²å‘å¡ç½‘ç³»ç»Ÿ

## ç³»ç»Ÿç‰¹ç‚¹

âœ… **Docker å®¹å™¨åŒ–** - ä¸€é”®éƒ¨ç½²ï¼Œæ”¯æŒæ‰€æœ‰ç³»ç»Ÿ  
âœ… **è‡ªåŠ¨åˆå§‹åŒ–** - æ•°æ®åº“è‡ªåŠ¨åˆ›å»ºå’Œåˆå§‹åŒ–  
âœ… **Nginx åå‘ä»£ç†** - é«˜æ€§èƒ½ Web æœåŠ¡å™¨  
âœ… **æ•°æ®æŒä¹…åŒ–** - æ•°æ®å®‰å…¨å­˜å‚¨  
âœ… **å¥åº·æ£€æŸ¥** - è‡ªåŠ¨ç›‘æ§æœåŠ¡çŠ¶æ€  

## æ”¯æŒçš„ç³»ç»Ÿ

- Linux (Ubuntu, CentOS, Debian, Fedora ç­‰)
- Windows (Docker Desktop)
- macOS (Docker Desktop)
- äº‘æœåŠ¡å™¨ (é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€AWSã€Azure ç­‰)

---

## å¿«é€Ÿéƒ¨ç½²ï¼ˆ3æ­¥ï¼‰

### ç¬¬ä¸€æ­¥ï¼šå®‰è£… Docker

**Linux (Ubuntu/Debian):**
```bash
curl -fsSL https://get.docker.com | sh
sudo systemctl start docker
sudo systemctl enable docker
```

**Linux (CentOS):**
```bash
curl -fsSL https://get.docker.com | sh
sudo systemctl start docker
sudo systemctl enable docker
```

**Windows/macOS:**  
ä¸‹è½½å®‰è£… Docker Desktop: https://www.docker.com/products/docker-desktop

**å®‰è£… Docker Compose:**
```bash
sudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```

### ç¬¬äºŒæ­¥ï¼šé…ç½®ç¯å¢ƒ

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.docker .env

# ç¼–è¾‘é…ç½®ï¼ˆå¿…é¡»ä¿®æ”¹ï¼‰
nano .env
```

**å¿…é¡»ä¿®æ”¹çš„é…ç½®ï¼š**
```env
DB_PASSWORD=your_secure_password_here
JWT_SECRET=your_random_secret_key_here
```

### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨éƒ¨ç½²

```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy.sh

# è¿è¡Œéƒ¨ç½²è„šæœ¬
./deploy.sh
```

é€‰æ‹© `1) é¦–æ¬¡éƒ¨ç½²`

ç­‰å¾…å‡ åˆ†é’Ÿï¼Œéƒ¨ç½²å®Œæˆï¼

---

## è®¿é—®ç³»ç»Ÿ

éƒ¨ç½²å®Œæˆåï¼Œåœ¨æµè§ˆå™¨è®¿é—®ï¼š

- **å‰ç«¯é¦–é¡µ**: http://your-server-ip
- **ç®¡ç†åå°**: http://your-server-ip/admin
- **API æ¥å£**: http://your-server-ip/api

**é»˜è®¤ç®¡ç†å‘˜è´¦å·:**
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`

âš ï¸ **é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹å¯†ç ï¼**

---

## æµ‹è¯•æ•°æ®

ç³»ç»Ÿé¦–æ¬¡å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨å¯¼å…¥æµ‹è¯•æ•°æ®ï¼š

- âœ… 4ä¸ªå•†å“åˆ†ç±»
- âœ… 10ä¸ªæµ‹è¯•å•†å“
- âœ… 50å¼ æµ‹è¯•å¡å¯†
- âœ… 3ä¸ªæµ‹è¯•ç”¨æˆ·ï¼ˆå¯†ç : 123456ï¼‰

å¯ä»¥ç›´æ¥æµ‹è¯•è´­ä¹°æµç¨‹ï¼

---

## å¸¸ç”¨å‘½ä»¤

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f app
docker-compose logs -f mysql
docker-compose logs -f nginx

# é‡å¯æœåŠ¡
docker-compose restart

# åœæ­¢æœåŠ¡
docker-compose down

# å¤‡ä»½æ•°æ®åº“
./deploy.sh  # é€‰æ‹© 8) å¤‡ä»½æ•°æ®åº“
```

---

## é…ç½® HTTPSï¼ˆå¯é€‰ï¼‰

### 1. å‡†å¤‡ SSL è¯ä¹¦

å°†è¯ä¹¦æ–‡ä»¶æ”¾åˆ° `nginx/ssl/` ç›®å½•ï¼š
```bash
mkdir -p nginx/ssl
# ä¸Šä¼ ä½ çš„è¯ä¹¦æ–‡ä»¶
# cert.pem - è¯ä¹¦æ–‡ä»¶
# key.pem - ç§é’¥æ–‡ä»¶
```

### 2. ä¿®æ”¹ Nginx é…ç½®

ç¼–è¾‘ `nginx/conf.d/default.conf`ï¼Œå–æ¶ˆ HTTPS éƒ¨åˆ†çš„æ³¨é‡Šå¹¶ä¿®æ”¹åŸŸåã€‚

### 3. é‡å¯ Nginx

```bash
docker-compose restart nginx
```

---

## é…ç½®æ”¯ä»˜æ¥å£

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œæ·»åŠ æ”¯ä»˜é…ç½®ï¼š

```env
# æ˜“æ”¯ä»˜é…ç½®
EPAY_API_URL=https://your-epay-domain.com
EPAY_PID=your_pid
EPAY_KEY=your_key
```

é‡å¯æœåŠ¡ï¼š
```bash
docker-compose restart app
```

---

## æ€§èƒ½ä¼˜åŒ–

### 1. è°ƒæ•´ MySQL é…ç½®

ç¼–è¾‘ `docker-compose.yml`ï¼Œåœ¨ mysql æœåŠ¡çš„ command ä¸­æ·»åŠ ï¼š
```yaml
--max_connections=1000
--innodb_buffer_pool_size=1G
```

### 2. å¯ç”¨ Nginx ç¼“å­˜

å·²åœ¨é…ç½®ä¸­å¯ç”¨ï¼Œé™æ€èµ„æºç¼“å­˜ 1 å¹´ã€‚

### 3. ä½¿ç”¨ CDN

å°†é™æ€èµ„æºä¸Šä¼ åˆ° CDNï¼Œä¿®æ”¹å‰ç«¯é…ç½®ã€‚

---

## å¤‡ä»½å’Œæ¢å¤

### è‡ªåŠ¨å¤‡ä»½

```bash
./deploy.sh
# é€‰æ‹© 8) å¤‡ä»½æ•°æ®åº“
```

### æ‰‹åŠ¨å¤‡ä»½

```bash
docker-compose exec mysql mysqldump -u root -p card_shop > backup.sql
```

### æ¢å¤æ•°æ®

```bash
docker-compose exec -T mysql mysql -u root -p card_shop < backup.sql
```

---

## ç›‘æ§å’Œç»´æŠ¤

### æŸ¥çœ‹èµ„æºä½¿ç”¨

```bash
docker stats
```

### æŸ¥çœ‹ç£ç›˜ä½¿ç”¨

```bash
df -h
docker system df
```

### æ¸…ç†æ— ç”¨æ•°æ®

```bash
docker system prune -a
```

---

## æ•…éšœæ’æŸ¥

### æœåŠ¡æ— æ³•å¯åŠ¨

```bash
# æŸ¥çœ‹æ—¥å¿—
docker-compose logs

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep -E '80|443|3000|3306'
```

### æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥ MySQL çŠ¶æ€
docker-compose ps mysql

# æŸ¥çœ‹ MySQL æ—¥å¿—
docker-compose logs mysql
```

### å‰ç«¯æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥ Nginx é…ç½®
docker-compose exec nginx nginx -t

# é‡å¯ Nginx
docker-compose restart nginx
```

---

## å®‰å…¨å»ºè®®

1. âœ… ä¿®æ”¹é»˜è®¤å¯†ç ï¼ˆæ•°æ®åº“ã€JWTã€ç®¡ç†å‘˜ï¼‰
2. âœ… å¯ç”¨ HTTPS
3. âœ… é…ç½®é˜²ç«å¢™
4. âœ… å®šæœŸå¤‡ä»½æ•°æ®
5. âœ… å®šæœŸæ›´æ–°ç³»ç»Ÿ

### é…ç½®é˜²ç«å¢™

```bash
# Ubuntu/Debian
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw enable

# CentOS
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload
```

---

## æ›´æ–°åº”ç”¨

```bash
# 1. å¤‡ä»½æ•°æ®
./deploy.sh  # é€‰æ‹© 8

# 2. æ‹‰å–æœ€æ–°ä»£ç 
git pull

# 3. é‡æ–°æ„å»º
docker-compose build --no-cache

# 4. é‡å¯æœåŠ¡
docker-compose up -d
```

---

## å¤šæœåŠ¡å™¨éƒ¨ç½²

ä½¿ç”¨ Docker Swarm æˆ– Kubernetes å®ç°é«˜å¯ç”¨éƒ¨ç½²ã€‚

### Docker Swarm ç¤ºä¾‹

```bash
# åˆå§‹åŒ– Swarm
docker swarm init

# éƒ¨ç½²æœåŠ¡
docker stack deploy -c docker-compose.yml card-shop

# æ‰©å±•åº”ç”¨å®ä¾‹
docker service scale card-shop_app=3
```

---

## ä¸‹ä¸€æ­¥

1. âœ… ç™»å½•ç®¡ç†åå°
2. âœ… ä¿®æ”¹ç®¡ç†å‘˜å¯†ç 
3. âœ… é…ç½®æ”¯ä»˜æ¥å£
4. âœ… æ·»åŠ å•†å“å’Œå¡å¯†
5. âœ… æµ‹è¯•è´­ä¹°æµç¨‹
6. âœ… é…ç½® HTTPSï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
7. âœ… è®¾ç½®å®šæœŸå¤‡ä»½

---

## è·å–å¸®åŠ©

- ğŸ“– [å®Œæ•´éƒ¨ç½²æ–‡æ¡£](DEPLOY.md)
- ğŸ“– [API æ–‡æ¡£](API.md)
- ğŸ“– [é¡¹ç›®ç»“æ„](PROJECT_STRUCTURE.md)
- ğŸ’¬ æäº¤ Issue è·å–æ”¯æŒ

---

## å¸¸è§é—®é¢˜

**Q: Docker å®‰è£…å¤±è´¥ï¼Ÿ**  
A: æ£€æŸ¥ç³»ç»Ÿç‰ˆæœ¬ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£å®‰è£…

**Q: ç«¯å£è¢«å ç”¨ï¼Ÿ**  
A: ä¿®æ”¹ docker-compose.yml ä¸­çš„ç«¯å£æ˜ å°„

**Q: æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥ï¼Ÿ**  
A: æ£€æŸ¥ .env ä¸­çš„æ•°æ®åº“é…ç½®

**Q: å¦‚ä½•æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼Ÿ**  
A: `docker-compose logs -f`

---

ğŸ‰ **éƒ¨ç½²å®Œæˆï¼ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼**

å¦‚æœè§‰å¾—ä¸é”™ï¼Œè¯·ç»™ä¸ª Star â­
